How to format your code:

Please submit a document of all the code you used. You do not need to include the output of the code, just the code itself. For each chunk of code, you should include an explanation of what that code is doing.

Here is an example:

#the function of this code is to generate a visualization of my table file.
#it uses my metadata and the table artifact I generated earlier to create that visualization.
#the visualization will include information that will allow me to calculate my sampling depth.
qiime feature-table summarize \
  --i-table table.qza \
  --o-visualization table.qzv \
  --m-sample-metadata-file sample-metadata.tsv









*****************************************Start of Code*******************************************************


conda activate qiime2-amplicaon-2024.2

#QZA to QZV
	take this data --i and summarize it into a visualization --o file demux.qza
qiime demux summarize \
  --i-data demux.qza \
  --o-visualization demux.qzv 


#data table, feature table and sampledata

$qiime dada2 denoise-paired \
  --i-demultiplexed-seqs demux.qza \
  --p-trim-left-f 15 \
  --p-trunc-len-f 192\
  --p-trim-left-r 29 \
  --p-trunc-len-r 190 \
  --o-representative-sequences rep-seqs-dada2.qza \
  --o-table table-dada2.qza \
  --o-denoising-stats stats-dada2.qza

Modifing the code to skip the mv and remanming step.

$qiime dada2 denoise-paired \
  --i-demultiplexed-seqs demux.qza \
  --p-trim-left-f 15 \
  --p-trunc-len-f 192\
  --p-trim-left-r 29 \
  --p-trunc-len-r 190 \
  --o-representative-sequences rep-seqs-dada2.qza \
  --o-table table-dada2.qza \
  --o-denoising-stats stats-dada2.qza



#meta data tabulate
qiime metadata tabulate \
  --m-input-file stats.qza \
  --o-visualization stats.qzv

#FeatureTable and FeatureData summaries (opened metadata file and saved as txt delimited)

qiime feature-table summarize \
  --i-table table.qza \
  --o-visualization table.qzv \
  --m-sample-metadata-file sample-metadata.txt
qiime feature-table tabulate-seqs \
  --i-data rep-seqs.qza \
  --o-visualization rep-seqs.qzv


#Taxonomic analysis 
	(NEED to Download Classifier first with this code)
	$wget \
  -O "gg-13-8-99-515-806-nb-classifier.qza" \
  "https://data.qiime2.org/2024.2/common/gg-13-8-99-515-806-nb-classifier.qza"

then use this code.......

$qiime feature-classifier classify-sklearn \
  --i-classifier gg-13-8-99-515-806-nb-classifier.qza \
  --i-reads rep-seqs.qza \
  --o-classification taxonomy.qza

qiime metadata tabulate \
  --m-input-file taxonomy.qza \
  --o-visualization taxonomy.qzv

2nd run with mitochondria adjustments
qiime taxa filter-table \
  --i-table table.qza \
  --i-taxonomy taxonomy.qza \
  --p-exclude mitochondria,chloroplast \
  --o-filtered-table filtered-table.qza

#Filtered table.qzv

qiime feature-table summarize \
  --i-table filtered_table.qza \
  --o-visualization filtered_table.qzv \
  --m-sample-metadata-file metadata.txt
qiime feature-table tabulate-seqs \
  --i-data rep-seqs.qza \
  --o-visualization rep-seqs.qzv


#Rerun visualize taxonoy table
qiime feature-classifier classify-sklearn \
  --i-classifier gg-13-8-99-515-806-nb-classifier.qza \
  --i-reads rep-seqs.qza \
  --o-classification taxonomy.qza

qiime metadata tabulate \
  --m-input-file filtered_table.qza \
  --o-visualization taxonomy.qzv

#Generate a tree for phylogenetic diversity analyses
qiime phylogeny align-to-tree-mafft-fasttree \
  --i-sequences rep-seqs.qza \
  --o-alignment aligned-rep-seqs.qza \
  --o-masked-alignment masked-aligned-rep-seqs.qza \
  --o-tree unrooted-tree.qza \
  --o-rooted-tree rooted-tree.qza

#Alpha and beta diversity analysis
qiime diversity core-metrics-phylogenetic \
  --i-phylogeny rooted-tree.qza \
  --i-table table.qza \
  --p-sampling-depth 1070 \
  --m-metadata-file sample-metadata.txt \
  --output-dir core-metrics-results

#diversity alpha-group-significance (CODE MUST BE EDITED)
qiime diversity alpha-group-significance \
  --i-alpha-diversity core-metrics-results/faith_pd_vector.qza \
  --m-metadata-file sample-metadata.txt \
  --o-visualization core-metrics-results/faith-pd-group-significance.qzv

qiime diversity alpha-group-significance \
  --i-alpha-diversity core-metrics-results/evenness_vector.qza \
  --m-metadata-file sample-metadata.txt \
  --o-visualization core-metrics-results/evenness-group-significance.qzv

***************************************************************************************edited
qiime diversity alpha-group-significance \
  --i-alpha-diversity core-metrics-results/shannon_vector.qza \
  --m-metadata-file sample-metadata.txt \
  --o-visualization core-metrics-results/shannon-group-significance.qzv

qiime diversity alpha-group-significance \
  --i-alpha-diversity core-metrics-results/observed_features_vector.qza \
  --m-metadata-file sample-metadata.txt \
  --o-visualization core-metrics-results/observed-features-group-significance.qzv
****************************************************************************************


#diversity beta-group-significance (CODE NEEDS TO BE EDITED)
qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/unweighted_unifrac_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column body-site \
  --o-visualization core-metrics-results/unweighted-unifrac-body-site-significance.qzv \
  --p-pairwise

qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/unweighted_unifrac_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column subject \
  --o-visualization core-metrics-results/unweighted-unifrac-subject-group-significance.qzv \
  --p-pairwise

***************************************************************************************edited
#diversity beta-group-significance

NOTE: You will need to run the code and edit --m metadata-column to: sex, flock, population 

qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/bray_curtis_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column sex \
  --o-visualization core-metrics-results/bray-curtis-sex-significance.qzv \
  --p-pairwise

qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/bray_curtis_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column population \
  --o-visualization core-metrics-results/bray-curtis-population-significance.qzv \
  --p-pairwise

qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/bray_curtis_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column flock \
  --o-visualization core-metrics-results/bray-curtis-flock-significance.qzv \
  --p-pairwise
*******************************************************************************************************






qiime diversity beta-group-significance \
  --i-distance-matrix core-metrics-results/bray_curtis_distance_matrix.qza \
  --m-metadata-file sample-metadata.txt \
  --m-metadata-column subject \
  --o-visualization core-metrics-results/bray-curtis-subject-group-significance.qzv \
  --p-pairwise




***************************************************************************************edited


























#taxa barplot

qiime taxa barplot \
  --i-table table.qza \
  --i-taxonomy taxonomy.qza \
  --m-metadata-file sample-metadata.txt \
  --o-visualization taxa-bar-plots.qzv



